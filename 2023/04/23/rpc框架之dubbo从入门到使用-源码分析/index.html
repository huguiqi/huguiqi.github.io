
 <!DOCTYPE HTML>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  
  <meta name="keywords" content="èƒ¡å°é»‘,æ¶æ„å¸ˆ,èµ„æ·±è½¯ä»¶å·¥ç¨‹å¸ˆ,object-c,swift,java,node,å°é»‘,æŠ€æœ¯,å¤§ç‰›,é˜¿é‡Œå·´å·´,è…¾è®¯,æ—…æ¸¸">
  
  
    <title>rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ | å°é»‘çš„æŠ€æœ¯åšå®¢</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="sam">
    
    <meta name="baidu-site-verification" content="zBj0BDqjSV" />
    
    <meta name="description" content="rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ äº†è§£ Dubbo æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„ ä»¥ä¸Šæ˜¯ Dubbo çš„å·¥ä½œåŸç†å›¾ï¼Œä»æŠ½è±¡æ¶æ„ä¸Šåˆ†ä¸ºä¸¤å±‚ï¼šæœåŠ¡æ²»ç†æŠ½è±¡æ§åˆ¶é¢ å’Œ Dubbo æ•°æ®é¢ ã€‚  æœåŠ¡æ²»ç†æ§åˆ¶é¢ã€‚æœåŠ¡æ²»ç†æ§åˆ¶é¢ä¸æ˜¯ç‰¹æŒ‡å¦‚æ³¨å†Œä¸­å¿ƒç±»çš„å•ä¸ªå…·ä½“ç»„ä»¶ï¼Œè€Œæ˜¯å¯¹ Dubbo æ²»ç†ä½“ç³»çš„æŠ½è±¡è¡¨è¾¾ã€‚æ§åˆ¶é¢åŒ…å«åè°ƒæœåŠ¡å‘ç°çš„æ³¨å†Œä¸­å¿ƒã€æµé‡ç®¡æ§ç­–ç•¥ã€Dubbo Admin æ§åˆ¶å°ç­‰ï¼Œå¦‚æœé‡‡ç”¨äº† Service">
<meta property="og:type" content="article">
<meta property="og:title" content="rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ">
<meta property="og:url" content="http://clockcoder.com/2023/04/23/rpc%E6%A1%86%E6%9E%B6%E4%B9%8Bdubbo%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E4%BD%BF%E7%94%A8-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/index.html">
<meta property="og:site_name" content="å°é»‘çš„æŠ€æœ¯åšå®¢">
<meta property="og:description" content="rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ äº†è§£ Dubbo æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„ ä»¥ä¸Šæ˜¯ Dubbo çš„å·¥ä½œåŸç†å›¾ï¼Œä»æŠ½è±¡æ¶æ„ä¸Šåˆ†ä¸ºä¸¤å±‚ï¼šæœåŠ¡æ²»ç†æŠ½è±¡æ§åˆ¶é¢ å’Œ Dubbo æ•°æ®é¢ ã€‚  æœåŠ¡æ²»ç†æ§åˆ¶é¢ã€‚æœåŠ¡æ²»ç†æ§åˆ¶é¢ä¸æ˜¯ç‰¹æŒ‡å¦‚æ³¨å†Œä¸­å¿ƒç±»çš„å•ä¸ªå…·ä½“ç»„ä»¶ï¼Œè€Œæ˜¯å¯¹ Dubbo æ²»ç†ä½“ç³»çš„æŠ½è±¡è¡¨è¾¾ã€‚æ§åˆ¶é¢åŒ…å«åè°ƒæœåŠ¡å‘ç°çš„æ³¨å†Œä¸­å¿ƒã€æµé‡ç®¡æ§ç­–ç•¥ã€Dubbo Admin æ§åˆ¶å°ç­‰ï¼Œå¦‚æœé‡‡ç”¨äº† Service">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://clockcoder.com/images/1681803160577-1923842c-abbd-4243-888f-9f9078c2e77a.png">
<meta property="og:image" content="http://clockcoder.com/images/1681803695395-88fc63a0-d5f5-43d1-986f-9afdead4bec8.png">
<meta property="og:image" content="http://clockcoder.com/images/1681804179462-8f75c97e-a24b-4c68-a08f-a8612ffc82a9.png">
<meta property="og:image" content="http://clockcoder.com/images/1681804493997-0c46f7ce-7e5a-45e2-a48d-bef0466807eb.png">
<meta property="og:image" content="http://clockcoder.com/images/1681804662125-e2fe926c-640c-4591-997c-93c6694a6c2b.png">
<meta property="og:image" content="http://clockcoder.com/images/1681804908444-d9820cce-f3ac-4997-a1dd-e593ab781dfa.png">
<meta property="og:image" content="http://clockcoder.com/images/1681805961476-7beaa91f-2f00-445b-a667-3cdd9f155516.png">
<meta property="og:image" content="http://clockcoder.com/images/1682241560101-ebd7bf04-2b6a-4e7a-8328-129222a396a6.png">
<meta property="og:image" content="http://clockcoder.com/images/1683253419695-9fc7c4a0-be56-45fe-ada0-af06f1fb60ac.png">
<meta property="og:image" content="http://clockcoder.com/images/1682242484220-513127a8-23a4-4259-aedc-5f316be1d453.png">
<meta property="og:image" content="http://clockcoder.com/images/1682244844479-e97e81c9-1118-4bae-8a32-de9c93270006.png">
<meta property="og:image" content="http://clockcoder.com/images/1683352201307-493127a0-4a91-455e-90ed-d4d79c564820.png">
<meta property="og:image" content="http://clockcoder.com/images/1683357207728-c49aceb1-0891-4147-91b1-c0e81328605e.png">
<meta property="article:published_time" content="2023-04-23T10:35:01.320Z">
<meta property="article:modified_time" content="2023-05-23T12:10:29.617Z">
<meta property="article:author" content="sam">
<meta property="article:tag" content="rpc">
<meta property="article:tag" content="dubbo">
<meta property="article:tag" content="netty">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://clockcoder.com/images/1681803160577-1923842c-abbd-4243-888f-9f9078c2e77a.png">
<meta name="twitter:creator" content="@XiaoheiSpring">
<link rel="publisher" href="109318125124422212783">

    
    <link rel="alternative" href="/atom.xml" title="å°é»‘çš„æŠ€æœ¯åšå®¢" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    
<link rel="stylesheet" href="/css/style.css">


<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7265659350794760"
     crossorigin="anonymous"></script>
<meta name="generator" content="Hexo 6.3.0"></head>

  <body>
    <header>
      
<div>

		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="å°é»‘çš„æŠ€æœ¯åšå®¢" title="å°é»‘çš„æŠ€æœ¯åšå®¢"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="å°é»‘çš„æŠ€æœ¯åšå®¢">å°é»‘çš„æŠ€æœ¯åšå®¢</a></h1>
				<h2 class="blog-motto">ä¸ç§¯è·¬æ­¥æ— ä»¥è‡³åƒé‡Œ</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="èœå•">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">ä¸»é¡µ</a></li>
					
						<li><a href="/archives">å½’æ¡£</a></li>
					
						<li><a href="/about">å…³äº</a></li>
					
					<li><a href="http://clockcoder.com">å‰¯ç«™</a></li>
					<li>
 					
						<form class="search" action="/search/index.html" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="text" id="search" autocomplete="on" class="st-default-search-input"  name="q" maxlength="30" placeholder="æœç´¢" />
					</form>
					
					</li>
				</ul>
			</nav>			
</div>

    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2023/04/23/rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ/" title="rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ" itemprop="url">rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ</a>
  </h1>
  <p class="article-author">By
       
		<a href="https://plus.google.com/109318125124422212783?rel=author" title="sam" target="_blank" itemprop="author">sam</a>
		
  <p class="article-time">
    <time datetime="2023-04-23T10:35:01.320Z" itemprop="datePublished"> å‘è¡¨äº 2023-04-23</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">æ–‡ç« ç›®å½•</strong>
		
			<ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#rpc%E6%A1%86%E6%9E%B6%E4%B9%8Bdubbo%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E4%BD%BF%E7%94%A8-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-number">1.</span> <span class="toc-text">rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3-Dubbo-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9E%B6%E6%9E%84"><span class="toc-number">2.</span> <span class="toc-text">äº†è§£ Dubbo æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Dubbo-%E6%95%B0%E6%8D%AE%E9%9D%A2"><span class="toc-number">2.1.</span> <span class="toc-text">Dubbo æ•°æ®é¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dubbo%E6%A1%86%E6%9E%B6%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84"><span class="toc-number">2.2.</span> <span class="toc-text">dubboæ¡†æ¶æ€»ä½“æ¶æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E8%A7%92%E8%89%B2%E8%AF%B4%E6%98%8E"><span class="toc-number">2.2.0.0.1.</span> <span class="toc-text">èŠ‚ç‚¹è§’è‰²è¯´æ˜</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%9E%B6%E6%9E%84"><span class="toc-number">2.3.</span> <span class="toc-text">ä»£ç æ¶æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%84%E5%B1%82%E8%AF%B4%E6%98%8E"><span class="toc-number">2.4.</span> <span class="toc-text">å„å±‚è¯´æ˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E8%AF%B4%E6%98%8E"><span class="toc-number">2.5.</span> <span class="toc-text">å…³ç³»è¯´æ˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%88%86%E5%8C%85"><span class="toc-number">2.6.</span> <span class="toc-text">æ¨¡å—åˆ†åŒ…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB"><span class="toc-number">2.7.</span> <span class="toc-text">ä¾èµ–å…³ç³»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E9%93%BE"><span class="toc-number">2.8.</span> <span class="toc-text">è°ƒç”¨é“¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.9.</span> <span class="toc-text">é¢†åŸŸæ¨¡å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RPC%E4%BC%A0%E8%BE%93%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">2.10.</span> <span class="toc-text">RPCä¼ è¾“å±‚å®ç°åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AA%E6%9C%8D%E5%8A%A1%E7%AB%AF-provide"><span class="toc-number">2.10.1.</span> <span class="toc-text">å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç«¯(provide)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8client%E7%AB%AF%E8%B0%83%E7%94%A8Provider%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.10.2.</span> <span class="toc-text">ä½¿ç”¨clientç«¯è°ƒç”¨Provideræ¥å£</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#netty%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86"><span class="toc-number">2.11.</span> <span class="toc-text">nettyé€šä¿¡åŸç†</span></a></li></ol></li></ol>
		
		</div>
		
		<h1 id="rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ"><a title="rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ" class="headerlink" href="#rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ"></a>rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ</h1><p><a name="Core6"></a></p>
<h1 id="äº†è§£-Dubbo-æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„"><a title="äº†è§£ Dubbo æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„" class="headerlink" href="#äº†è§£-Dubbo-æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„"></a>äº†è§£ Dubbo æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„</h1><p><img loading="lazy" alt="image.png" src="/images/1681803160577-1923842c-abbd-4243-888f-9f9078c2e77a.png"></p>
<p>ä»¥ä¸Šæ˜¯ Dubbo çš„å·¥ä½œåŸç†å›¾ï¼Œä»æŠ½è±¡æ¶æ„ä¸Šåˆ†ä¸ºä¸¤å±‚ï¼š<strong>æœåŠ¡æ²»ç†æŠ½è±¡æ§åˆ¶é¢</strong> å’Œ <strong>Dubbo æ•°æ®é¢</strong> ã€‚</p>
<ul>
<li><strong>æœåŠ¡æ²»ç†æ§åˆ¶é¢</strong>ã€‚æœåŠ¡æ²»ç†æ§åˆ¶é¢ä¸æ˜¯ç‰¹æŒ‡å¦‚æ³¨å†Œä¸­å¿ƒç±»çš„å•ä¸ªå…·ä½“ç»„ä»¶ï¼Œè€Œæ˜¯å¯¹ Dubbo æ²»ç†ä½“ç³»çš„æŠ½è±¡è¡¨è¾¾ã€‚æ§åˆ¶é¢åŒ…å«åè°ƒæœåŠ¡å‘ç°çš„æ³¨å†Œä¸­å¿ƒã€æµé‡ç®¡æ§ç­–ç•¥ã€Dubbo Admin æ§åˆ¶å°ç­‰ï¼Œå¦‚æœé‡‡ç”¨äº† Service Mesh æ¶æ„åˆ™è¿˜åŒ…å« Istio ç­‰æœåŠ¡ç½‘æ ¼æ§åˆ¶é¢ã€‚</li>
<li><strong>Dubbo æ•°æ®é¢</strong>ã€‚æ•°æ®é¢ä»£è¡¨é›†ç¾¤éƒ¨ç½²çš„æ‰€æœ‰ Dubbo è¿›ç¨‹ï¼Œè¿›ç¨‹ä¹‹é—´é€šè¿‡ RPC åè®®å®ç°æ•°æ®äº¤æ¢ï¼ŒDubbo å®šä¹‰äº†å¾®æœåŠ¡åº”ç”¨å¼€å‘ä¸è°ƒç”¨è§„èŒƒå¹¶è´Ÿè´£å®Œæˆæ•°æ®ä¼ è¾“çš„ç¼–è§£ç å·¥ä½œã€‚<ul>
<li>æœåŠ¡æ¶ˆè´¹è€… (Dubbo Consumer)ï¼Œå‘èµ·ä¸šåŠ¡è°ƒç”¨æˆ– RPC é€šä¿¡çš„ Dubbo è¿›ç¨‹</li>
<li>æœåŠ¡æä¾›è€… (Dubbo Provider)ï¼Œæ¥æ”¶ä¸šåŠ¡è°ƒç”¨æˆ– RPC é€šä¿¡çš„ Dubbo è¿›ç¨‹</li>
</ul>
</li>
</ul>
<p><a name="o5WJE"></a></p>
<h2 id="Dubbo-æ•°æ®é¢"><a title="Dubbo æ•°æ®é¢" class="headerlink" href="#Dubbo-æ•°æ®é¢"></a>Dubbo æ•°æ®é¢</h2><p>ä»æ•°æ®é¢è§†è§’ï¼ŒDubbo å¸®åŠ©è§£å†³äº†å¾®æœåŠ¡å®è·µä¸­çš„ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ul>
<li>Dubbo ä½œä¸º <strong>æœåŠ¡å¼€å‘æ¡†æ¶</strong> çº¦æŸäº†å¾®æœåŠ¡å®šä¹‰ã€å¼€å‘ä¸è°ƒç”¨çš„è§„èŒƒï¼Œå®šä¹‰äº†æœåŠ¡æ²»ç†æµç¨‹åŠé€‚é…æ¨¡å¼</li>
<li>Dubbo ä½œä¸º <strong>RPC é€šä¿¡åè®®å®ç°</strong> è§£å†³æœåŠ¡é—´æ•°æ®ä¼ è¾“çš„ç¼–è§£ç é—®é¢˜</li>
</ul>
<p><img loading="lazy" alt="image.png" src="/images/1681803695395-88fc63a0-d5f5-43d1-986f-9afdead4bec8.png"></p>
<p><a target="_blank" rel="noopener" href="https://cn.dubbo.apache.org/zh-cn/overview/what/overview/">å‚è€ƒå®˜ç½‘ä»‹ç»</a></p>
<p><a name="VPbIT"></a></p>
<h2 id="dubboæ¡†æ¶æ€»ä½“æ¶æ„"><a title="dubboæ¡†æ¶æ€»ä½“æ¶æ„" class="headerlink" href="#dubboæ¡†æ¶æ€»ä½“æ¶æ„"></a>dubboæ¡†æ¶æ€»ä½“æ¶æ„</h2><p><img loading="lazy" alt="image.png" src="/images/1681804179462-8f75c97e-a24b-4c68-a08f-a8612ffc82a9.png"></p>
<p><a name="gLAdv"></a></p>
<h5 id="èŠ‚ç‚¹è§’è‰²è¯´æ˜"><a title="èŠ‚ç‚¹è§’è‰²è¯´æ˜" class="headerlink" href="#èŠ‚ç‚¹è§’è‰²è¯´æ˜"></a>èŠ‚ç‚¹è§’è‰²è¯´æ˜</h5><table>
<thead>
<tr>
<th>èŠ‚ç‚¹</th>
<th>è§’è‰²è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td>Provider</td>
<td>æš´éœ²æœåŠ¡çš„æœåŠ¡æä¾›æ–¹</td>
</tr>
<tr>
<td>Consumer</td>
<td>è°ƒç”¨è¿œç¨‹æœåŠ¡çš„æœåŠ¡æ¶ˆè´¹æ–¹</td>
</tr>
<tr>
<td>Registry</td>
<td>æœåŠ¡æ³¨å†Œä¸å‘ç°çš„æ³¨å†Œä¸­å¿ƒ</td>
</tr>
<tr>
<td>Monitor</td>
<td>ç»Ÿè®¡æœåŠ¡çš„è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´çš„ç›‘æ§ä¸­å¿ƒ</td>
</tr>
<tr>
<td>Container</td>
<td>æœåŠ¡è¿è¡Œå®¹å™¨</td>
</tr>
</tbody></table>
<p><a target="_blank" rel="noopener" href="https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/concepts-and-architecture/overall-architecture/">å®˜ç½‘ä»‹ç»æ¶æ„é¡µé¢</a></p>
<p><a name="kkETu"></a></p>
<h2 id="ä»£ç æ¶æ„"><a title="ä»£ç æ¶æ„" class="headerlink" href="#ä»£ç æ¶æ„"></a>ä»£ç æ¶æ„</h2><p><img loading="lazy" alt="image.png" src="/images/1681804493997-0c46f7ce-7e5a-45e2-a48d-bef0466807eb.png"></p>
<p>å›¾ä¾‹è¯´æ˜ï¼š</p>
<ul>
<li>å›¾ä¸­å·¦è¾¹æ·¡è“èƒŒæ™¯çš„ä¸ºæœåŠ¡æ¶ˆè´¹æ–¹ä½¿ç”¨çš„æ¥å£ï¼Œå³è¾¹æ·¡ç»¿è‰²èƒŒæ™¯çš„ä¸ºæœåŠ¡æä¾›æ–¹ä½¿ç”¨çš„æ¥å£ï¼Œä½äºä¸­è½´çº¿ä¸Šçš„ä¸ºåŒæ–¹éƒ½ç”¨åˆ°çš„æ¥å£ã€‚</li>
<li>å›¾ä¸­ä»ä¸‹è‡³ä¸Šåˆ†ä¸ºåå±‚ï¼Œå„å±‚å‡ä¸ºå•å‘ä¾èµ–ï¼Œå³è¾¹çš„é»‘è‰²ç®­å¤´ä»£è¡¨å±‚ä¹‹é—´çš„ä¾èµ–å…³ç³»ï¼Œæ¯ä¸€å±‚éƒ½å¯ä»¥å‰¥ç¦»ä¸Šå±‚è¢«å¤ç”¨ï¼Œå…¶ä¸­ï¼ŒService å’Œ Config å±‚ä¸º APIï¼Œå…¶å®ƒå„å±‚å‡ä¸º SPIã€‚</li>
<li>å›¾ä¸­ç»¿è‰²å°å—çš„ä¸ºæ‰©å±•æ¥å£ï¼Œè“è‰²å°å—ä¸ºå®ç°ç±»ï¼Œå›¾ä¸­åªæ˜¾ç¤ºç”¨äºå…³è”å„å±‚çš„å®ç°ç±»ã€‚</li>
<li>å›¾ä¸­è“è‰²è™šçº¿ä¸ºåˆå§‹åŒ–è¿‡ç¨‹ï¼Œå³å¯åŠ¨æ—¶ç»„è£…é“¾ï¼Œçº¢è‰²å®çº¿ä¸ºæ–¹æ³•è°ƒç”¨è¿‡ç¨‹ï¼Œå³è¿è¡Œæ—¶è°ƒç”¨é“¾ï¼Œç´«è‰²ä¸‰è§’ç®­å¤´ä¸ºç»§æ‰¿ï¼Œå¯ä»¥æŠŠå­ç±»çœ‹ä½œçˆ¶ç±»çš„åŒä¸€ä¸ªèŠ‚ç‚¹ï¼Œçº¿ä¸Šçš„æ–‡å­—ä¸ºè°ƒç”¨çš„æ–¹æ³•ã€‚<br><a name="z8JtN"></a></li>
</ul>
<h2 id="å„å±‚è¯´æ˜"><a title="å„å±‚è¯´æ˜" class="headerlink" href="#å„å±‚è¯´æ˜"></a>å„å±‚è¯´æ˜</h2><ul>
<li><strong>Config é…ç½®å±‚</strong>ï¼šå¯¹å¤–é…ç½®æ¥å£ï¼Œä»¥ ServiceConfig, ReferenceConfig ä¸ºä¸­å¿ƒï¼Œå¯ä»¥ç›´æ¥åˆå§‹åŒ–é…ç½®ç±»ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ spring è§£æé…ç½®ç”Ÿæˆé…ç½®ç±»</li>
<li><strong>Proxy æœåŠ¡ä»£ç†å±‚</strong>ï¼šæœåŠ¡æ¥å£é€æ˜ä»£ç†ï¼Œç”ŸæˆæœåŠ¡çš„å®¢æˆ·ç«¯ Stub å’ŒæœåŠ¡å™¨ç«¯ Skeleton, ä»¥ ServiceProxy ä¸ºä¸­å¿ƒï¼Œæ‰©å±•æ¥å£ä¸º ProxyFactory</li>
<li><strong>Registry æ³¨å†Œä¸­å¿ƒå±‚</strong>ï¼šå°è£…æœåŠ¡åœ°å€çš„æ³¨å†Œä¸å‘ç°ï¼Œä»¥æœåŠ¡ URL ä¸ºä¸­å¿ƒï¼Œæ‰©å±•æ¥å£ä¸º RegistryFactory, Registry, RegistryService</li>
<li><strong>Cluster è·¯ç”±å±‚</strong>ï¼šå°è£…å¤šä¸ªæä¾›è€…çš„è·¯ç”±åŠè´Ÿè½½å‡è¡¡ï¼Œå¹¶æ¡¥æ¥æ³¨å†Œä¸­å¿ƒï¼Œä»¥ Invoker ä¸ºä¸­å¿ƒï¼Œæ‰©å±•æ¥å£ä¸º Cluster, Directory, Router, LoadBalance</li>
<li><strong>Monitor ç›‘æ§å±‚</strong>ï¼šRPC è°ƒç”¨æ¬¡æ•°å’Œè°ƒç”¨æ—¶é—´ç›‘æ§ï¼Œä»¥ Statistics ä¸ºä¸­å¿ƒï¼Œæ‰©å±•æ¥å£ä¸º MonitorFactory, Monitor, MonitorService</li>
<li><strong>Protocol è¿œç¨‹è°ƒç”¨å±‚</strong>ï¼šå°è£… RPC è°ƒç”¨ï¼Œä»¥ Invocation, Result ä¸ºä¸­å¿ƒï¼Œæ‰©å±•æ¥å£ä¸º Protocol, Invoker, Exporter</li>
<li><strong>Exchange ä¿¡æ¯äº¤æ¢å±‚</strong>ï¼šå°è£…è¯·æ±‚å“åº”æ¨¡å¼ï¼ŒåŒæ­¥è½¬å¼‚æ­¥ï¼Œä»¥ Request, Response ä¸ºä¸­å¿ƒï¼Œæ‰©å±•æ¥å£ä¸º Exchanger, ExchangeChannel, ExchangeClient, ExchangeServer</li>
<li><strong>Transport ç½‘ç»œä¼ è¾“å±‚</strong>ï¼šæŠ½è±¡ mina å’Œ netty ä¸ºç»Ÿä¸€æ¥å£ï¼Œä»¥ Message ä¸ºä¸­å¿ƒï¼Œæ‰©å±•æ¥å£ä¸º Channel, Transporter, Client, Server, Codec</li>
<li><strong>Serialize æ•°æ®åºåˆ—åŒ–å±‚</strong>ï¼šå¯å¤ç”¨çš„ä¸€äº›å·¥å…·ï¼Œæ‰©å±•æ¥å£ä¸º Serialization, ObjectInput, ObjectOutput, ThreadPool</li>
</ul>
<p><a name="YzIB2"></a></p>
<h2 id="å…³ç³»è¯´æ˜"><a title="å…³ç³»è¯´æ˜" class="headerlink" href="#å…³ç³»è¯´æ˜"></a>å…³ç³»è¯´æ˜</h2><ul>
<li>åœ¨ RPC ä¸­ï¼ŒProtocol æ˜¯æ ¸å¿ƒå±‚ï¼Œä¹Ÿå°±æ˜¯åªè¦æœ‰ Protocol + Invoker + Exporter å°±å¯ä»¥å®Œæˆéé€æ˜çš„ RPC è°ƒç”¨ï¼Œç„¶ååœ¨ Invoker çš„ä¸»è¿‡ç¨‹ä¸Š Filter æ‹¦æˆªç‚¹ã€‚</li>
<li>å›¾ä¸­çš„ Consumer å’Œ Provider æ˜¯æŠ½è±¡æ¦‚å¿µï¼Œåªæ˜¯æƒ³è®©çœ‹å›¾è€…æ›´ç›´è§‚çš„äº†è§£å“ªäº›ç±»åˆ†å±äºå®¢æˆ·ç«¯ä¸æœåŠ¡å™¨ç«¯ï¼Œä¸ç”¨ Client å’Œ Server çš„åŸå› æ˜¯ Dubbo åœ¨å¾ˆå¤šåœºæ™¯ä¸‹éƒ½ä½¿ç”¨ Provider, Consumer, Registry, Monitor åˆ’åˆ†é€»è¾‘æ‹“æ‰‘èŠ‚ç‚¹ï¼Œä¿æŒç»Ÿä¸€æ¦‚å¿µã€‚</li>
<li>è€Œ Cluster æ˜¯å¤–å›´æ¦‚å¿µï¼Œæ‰€ä»¥ Cluster çš„ç›®çš„æ˜¯å°†å¤šä¸ª Invoker ä¼ªè£…æˆä¸€ä¸ª Invokerï¼Œè¿™æ ·å…¶å®ƒäººåªè¦å…³æ³¨ Protocol å±‚ Invoker å³å¯ï¼ŒåŠ ä¸Š Cluster æˆ–è€…å»æ‰ Cluster å¯¹å…¶å®ƒå±‚éƒ½ä¸ä¼šé€ æˆå½±å“ï¼Œå› ä¸ºåªæœ‰ä¸€ä¸ªæä¾›è€…æ—¶ï¼Œæ˜¯ä¸éœ€è¦ Cluster çš„ã€‚</li>
<li>Proxy å±‚å°è£…äº†æ‰€æœ‰æ¥å£çš„é€æ˜åŒ–ä»£ç†ï¼Œè€Œåœ¨å…¶å®ƒå±‚éƒ½ä»¥ Invoker ä¸ºä¸­å¿ƒï¼Œåªæœ‰åˆ°äº†æš´éœ²ç»™ç”¨æˆ·ä½¿ç”¨æ—¶ï¼Œæ‰ç”¨ Proxy å°† Invoker è½¬æˆæ¥å£ï¼Œæˆ–å°†æ¥å£å®ç°è½¬æˆ Invokerï¼Œä¹Ÿå°±æ˜¯å»æ‰ Proxy å±‚ RPC æ˜¯å¯ä»¥ Run çš„ï¼Œåªæ˜¯ä¸é‚£ä¹ˆé€æ˜ï¼Œä¸é‚£ä¹ˆçœ‹èµ·æ¥åƒè°ƒæœ¬åœ°æœåŠ¡ä¸€æ ·è°ƒè¿œç¨‹æœåŠ¡ã€‚</li>
<li>è€Œ Remoting å®ç°æ˜¯ Dubbo åè®®çš„å®ç°ï¼Œå¦‚æœä½ é€‰æ‹© RMI åè®®ï¼Œæ•´ä¸ª Remoting éƒ½ä¸ä¼šç”¨ä¸Šï¼ŒRemoting å†…éƒ¨å†åˆ’ä¸º Transport ä¼ è¾“å±‚å’Œ Exchange ä¿¡æ¯äº¤æ¢å±‚ï¼ŒTransport å±‚åªè´Ÿè´£å•å‘æ¶ˆæ¯ä¼ è¾“ï¼Œæ˜¯å¯¹ Mina, Netty, Grizzly çš„æŠ½è±¡ï¼Œå®ƒä¹Ÿå¯ä»¥æ‰©å±• UDP ä¼ è¾“ï¼Œè€Œ Exchange å±‚æ˜¯åœ¨ä¼ è¾“å±‚ä¹‹ä¸Šå°è£…äº† Request-Response è¯­ä¹‰ã€‚</li>
<li>Registry å’Œ Monitor å®é™…ä¸Šä¸ç®—ä¸€å±‚ï¼Œè€Œæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„èŠ‚ç‚¹ï¼Œåªæ˜¯ä¸ºäº†å…¨å±€æ¦‚è§ˆï¼Œç”¨å±‚çš„æ–¹å¼ç”»åœ¨ä¸€èµ·ã€‚</li>
</ul>
<p><a name="PLbEb"></a></p>
<h2 id="æ¨¡å—åˆ†åŒ…"><a title="æ¨¡å—åˆ†åŒ…" class="headerlink" href="#æ¨¡å—åˆ†åŒ…"></a>æ¨¡å—åˆ†åŒ…</h2><p><img loading="lazy" alt="image.png" src="/images/1681804662125-e2fe926c-640c-4591-997c-93c6694a6c2b.png"></p>
<p>æ¨¡å—è¯´æ˜ï¼š</p>
<ul>
<li><strong>dubbo-common å…¬å…±é€»è¾‘æ¨¡å—</strong>ï¼šåŒ…æ‹¬ Util ç±»å’Œé€šç”¨æ¨¡å‹ã€‚</li>
<li><strong>dubbo-remoting è¿œç¨‹é€šè®¯æ¨¡å—</strong>ï¼šç›¸å½“äº Dubbo åè®®çš„å®ç°ï¼Œå¦‚æœ RPC ç”¨ RMIåè®®åˆ™ä¸éœ€è¦ä½¿ç”¨æ­¤åŒ…ã€‚</li>
<li><strong>dubbo-rpc è¿œç¨‹è°ƒç”¨æ¨¡å—</strong>ï¼šæŠ½è±¡å„ç§åè®®ï¼Œä»¥åŠåŠ¨æ€ä»£ç†ï¼ŒåªåŒ…å«ä¸€å¯¹ä¸€çš„è°ƒç”¨ï¼Œä¸å…³å¿ƒé›†ç¾¤çš„ç®¡ç†ã€‚</li>
<li><strong>dubbo-cluster é›†ç¾¤æ¨¡å—</strong>ï¼šå°†å¤šä¸ªæœåŠ¡æä¾›æ–¹ä¼ªè£…ä¸ºä¸€ä¸ªæä¾›æ–¹ï¼ŒåŒ…æ‹¬ï¼šè´Ÿè½½å‡è¡¡, å®¹é”™ï¼Œè·¯ç”±ç­‰ï¼Œé›†ç¾¤çš„åœ°å€åˆ—è¡¨å¯ä»¥æ˜¯é™æ€é…ç½®çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯ç”±æ³¨å†Œä¸­å¿ƒä¸‹å‘ã€‚</li>
<li><strong>dubbo-registry æ³¨å†Œä¸­å¿ƒæ¨¡å—</strong>ï¼šåŸºäºæ³¨å†Œä¸­å¿ƒä¸‹å‘åœ°å€çš„é›†ç¾¤æ–¹å¼ï¼Œä»¥åŠå¯¹å„ç§æ³¨å†Œä¸­å¿ƒçš„æŠ½è±¡ã€‚</li>
<li><strong>dubbo-monitor ç›‘æ§æ¨¡å—</strong>ï¼šç»Ÿè®¡æœåŠ¡è°ƒç”¨æ¬¡æ•°ï¼Œè°ƒç”¨æ—¶é—´çš„ï¼Œè°ƒç”¨é“¾è·Ÿè¸ªçš„æœåŠ¡ã€‚</li>
<li><strong>dubbo-config é…ç½®æ¨¡å—</strong>ï¼šæ˜¯ Dubbo å¯¹å¤–çš„ APIï¼Œç”¨æˆ·é€šè¿‡ Config ä½¿ç”¨Dubboï¼Œéšè— Dubbo æ‰€æœ‰ç»†èŠ‚ã€‚</li>
<li><strong>dubbo-container å®¹å™¨æ¨¡å—</strong>ï¼šæ˜¯ä¸€ä¸ª Standlone çš„å®¹å™¨ï¼Œä»¥ç®€å•çš„ Main åŠ è½½ Spring å¯åŠ¨ï¼Œå› ä¸ºæœåŠ¡é€šå¸¸ä¸éœ€è¦ Tomcat/JBoss ç­‰ Web å®¹å™¨çš„ç‰¹æ€§ï¼Œæ²¡å¿…è¦ç”¨ Web å®¹å™¨å»åŠ è½½æœåŠ¡ã€‚</li>
</ul>
<p>æ•´ä½“ä¸ŠæŒ‰ç…§åˆ†å±‚ç»“æ„è¿›è¡Œåˆ†åŒ…ï¼Œä¸åˆ†å±‚çš„ä¸åŒç‚¹åœ¨äºï¼š</p>
<ul>
<li>Container ä¸ºæœåŠ¡å®¹å™¨ï¼Œç”¨äºéƒ¨ç½²è¿è¡ŒæœåŠ¡ï¼Œæ²¡æœ‰åœ¨å±‚ä¸­ç”»å‡ºã€‚</li>
<li>Protocol å±‚å’Œ Proxy å±‚éƒ½æ”¾åœ¨ rpc æ¨¡å—ä¸­ï¼Œè¿™ä¸¤å±‚æ˜¯ rpc çš„æ ¸å¿ƒï¼Œåœ¨ä¸éœ€è¦é›†ç¾¤ä¹Ÿå°±æ˜¯åªæœ‰ä¸€ä¸ªæä¾›è€…æ—¶ï¼Œå¯ä»¥åªä½¿ç”¨è¿™ä¸¤å±‚å®Œæˆ rpc è°ƒç”¨ã€‚</li>
<li>Transport å±‚å’Œ Exchange å±‚éƒ½æ”¾åœ¨ remoting æ¨¡å—ä¸­ï¼Œä¸º rpc è°ƒç”¨çš„é€šè®¯åŸºç¡€ã€‚</li>
<li>Serialize å±‚æ”¾åœ¨ common æ¨¡å—ä¸­ï¼Œä»¥ä¾¿æ›´å¤§ç¨‹åº¦å¤ç”¨ã€‚</li>
</ul>
<p><a name="HuIGL"></a></p>
<h2 id="ä¾èµ–å…³ç³»"><a title="ä¾èµ–å…³ç³»" class="headerlink" href="#ä¾èµ–å…³ç³»"></a>ä¾èµ–å…³ç³»</h2><p><img loading="lazy" alt="image.png" src="/images/1681804908444-d9820cce-f3ac-4997-a1dd-e593ab781dfa.png"></p>
<p>å›¾ä¾‹è¯´æ˜ï¼š</p>
<ul>
<li>å›¾ä¸­å°æ–¹å— Protocol, Cluster, Proxy, Service, Container, Registry, Monitor ä»£è¡¨å±‚æˆ–æ¨¡å—ï¼Œè“è‰²çš„è¡¨ç¤ºä¸ä¸šåŠ¡æœ‰äº¤äº’ï¼Œç»¿è‰²çš„è¡¨ç¤ºåªå¯¹ Dubbo å†…éƒ¨äº¤äº’ã€‚</li>
<li>å›¾ä¸­èƒŒæ™¯æ–¹å— Consumer, Provider, Registry, Monitor ä»£è¡¨éƒ¨ç½²é€»è¾‘æ‹“æ‰‘èŠ‚ç‚¹ã€‚</li>
<li>å›¾ä¸­è“è‰²è™šçº¿ä¸ºåˆå§‹åŒ–æ—¶è°ƒç”¨ï¼Œçº¢è‰²è™šçº¿ä¸ºè¿è¡Œæ—¶å¼‚æ­¥è°ƒç”¨ï¼Œçº¢è‰²å®çº¿ä¸ºè¿è¡Œæ—¶åŒæ­¥è°ƒç”¨ã€‚</li>
<li>å›¾ä¸­åªåŒ…å« RPC çš„å±‚ï¼Œä¸åŒ…å« Remoting çš„å±‚ï¼ŒRemoting æ•´ä½“éƒ½éšå«åœ¨ Protocol ä¸­ã€‚</li>
</ul>
<p><a name="zXgJE"></a></p>
<h2 id="è°ƒç”¨é“¾"><a title="è°ƒç”¨é“¾" class="headerlink" href="#è°ƒç”¨é“¾"></a>è°ƒç”¨é“¾</h2><p><img loading="lazy" alt="image.png" src="/images/1681805961476-7beaa91f-2f00-445b-a667-3cdd9f155516.png"></p>
<p><a name="AK46A"></a></p>
<h2 id="é¢†åŸŸæ¨¡å‹"><a title="é¢†åŸŸæ¨¡å‹" class="headerlink" href="#é¢†åŸŸæ¨¡å‹"></a>é¢†åŸŸæ¨¡å‹</h2><p>åœ¨ Dubbo çš„æ ¸å¿ƒé¢†åŸŸæ¨¡å‹ä¸­ï¼š</p>
<ul>
<li>Protocol æ˜¯æœåŠ¡åŸŸï¼Œå®ƒæ˜¯ Invoker æš´éœ²å’Œå¼•ç”¨çš„ä¸»åŠŸèƒ½å…¥å£ï¼Œå®ƒè´Ÿè´£ Invoker çš„ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€‚</li>
<li>Invoker æ˜¯å®ä½“åŸŸï¼Œå®ƒæ˜¯ Dubbo çš„æ ¸å¿ƒæ¨¡å‹ï¼Œå…¶å®ƒæ¨¡å‹éƒ½å‘å®ƒé æ‹¢ï¼Œæˆ–è½¬æ¢æˆå®ƒï¼Œå®ƒä»£è¡¨ä¸€ä¸ªå¯æ‰§è¡Œä½“ï¼Œå¯å‘å®ƒå‘èµ· invoke è°ƒç”¨ï¼Œå®ƒæœ‰å¯èƒ½æ˜¯ä¸€ä¸ªæœ¬åœ°çš„å®ç°ï¼Œä¹Ÿå¯èƒ½æ˜¯ä¸€ä¸ªè¿œç¨‹çš„å®ç°ï¼Œä¹Ÿå¯èƒ½ä¸€ä¸ªé›†ç¾¤å®ç°ã€‚</li>
<li>Invocation æ˜¯ä¼šè¯åŸŸï¼Œå®ƒæŒæœ‰è°ƒç”¨è¿‡ç¨‹ä¸­çš„å˜é‡ï¼Œæ¯”å¦‚æ–¹æ³•åï¼Œå‚æ•°ç­‰ã€‚</li>
</ul>
<p><a name="vTcTE"></a></p>
<h2 id="RPCä¼ è¾“å±‚å®ç°åŸç†"><a title="RPCä¼ è¾“å±‚å®ç°åŸç†" class="headerlink" href="#RPCä¼ è¾“å±‚å®ç°åŸç†"></a>RPCä¼ è¾“å±‚å®ç°åŸç†</h2><p>RPCä¸­Protocol è¿œç¨‹è°ƒç”¨å±‚æ˜¯æ ¸å¿ƒå±‚ï¼Œå°è£… RPC è°ƒç”¨ã€‚<br>æ‰€ä»¥ï¼Œåªè¦ææ¸…æ¥šProtocolçš„åº•å±‚å®ç°å°±å¯ä»¥äº†ã€‚<br>ä¸Šé¢ä»‹ç»è¯´ï¼Œ Protocol + Invoker + Exporter å°±å¯ä»¥å®Œæˆéé€æ˜çš„ RPC è°ƒç”¨ï¼Œé‚£å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„å‘¢ï¼Ÿ</p>
<p>ä»dubboç»™å‡ºçš„å®˜æ–¹ä¾‹å­å…¥æ‰‹</p>
<p><a name="Ya8vO"></a></p>
<h3 id="å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç«¯-provide"><a title="å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç«¯(provide)" class="headerlink" href="#å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç«¯-provide"></a>å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç«¯(provide)</h3><p>GreetingsService.java:</p>
<pre><code class="java">  public interface GreetingsService &#123;

      String sayHi(String name);
  &#125;
</code></pre>
<p>GreetingsServiceImpl.java:</p>
<pre><code class="java">  public class GreetingsServiceImpl implements GreetingsService &#123;
      @Override
      public String sayHi(String name) &#123;
          return "hi, " + name + " I am provider";
      &#125;
  &#125;
</code></pre>
<p><br></p>
<p>å¯åŠ¨ä¸€ä¸ªProvide<br>MainAppllication.javaï¼š</p>
<pre><code>public class MainApplication &#123;

    public static void main(String[] args) &#123;
        // å®šä¹‰å…·ä½“çš„æœåŠ¡
        ServiceConfig&lt;GreetingsService&gt; service = new ServiceConfig&lt;&gt;();
        service.setInterface(GreetingsService.class);
        service.setRef(new GreetingsServiceImpl());

        // å¯åŠ¨ Dubbo
        DubboBootstrap.getInstance()
                .application("first-dubbo-provider")
                .registry(new RegistryConfig("zookeeper://127.0.0.1:2181"))
                .protocol(new ProtocolConfig("dubbo", -1))
                .service(service)
                .start()
                .await();
    &#125;
&#125;
</code></pre>
<p>æ ¹æ®å¯åŠ¨dubboæœåŠ¡ç«¯çš„ä»£ç ï¼Œæ•´ç†äº†è°ƒç”¨æ—¶åºå›¾å¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" alt="dubbo-explor.drawio.png" src="/images/1682241560101-ebd7bf04-2b6a-4e7a-8328-129222a396a6.png"></p>
<p>æ‰€ä»¥ä»ä¸Šå›¾å¯çœ‹å‡ºï¼Œæš´éœ²æœåŠ¡çš„å·¥ä½œå…¶å®ä¸»è¦é›†ä¸­åœ¨ServiceConfig.doExportUrl(local,false)è¿™ä¸ªæ–¹æ³•ä¸Šã€‚</p>
<p>Protocolæ˜¯æœåŠ¡åŸŸï¼Œä¹Ÿå°±æ˜¯Invokerçš„å…¥å£ï¼Œæ˜¯é—¨é¢ã€‚<br>æ‰€ä»¥ï¼Œthis.protocolSPI.export((Invoker)invoker);æ‰æ˜¯çœŸæ­£æ‰§è¡Œæš´éœ²æœåŠ¡çš„åº•å±‚æ–¹æ³•ã€‚</p>
<p>protocolSPIçš„å¡«å……å®ä¾‹æ˜¯AbstractProxyProtocolå¯¹è±¡ã€‚</p>
<p>AbstractProxyProtocolç±»å›¾è¡¨ç¤ºå¦‚ä¸‹ï¼š</p>
<p><img loading="lazy" alt="img" src="/images/1683253419695-9fc7c4a0-be56-45fe-ada0-af06f1fb60ac.png"></p>
<p>æˆ‘ä»¬å†è¿›å…¥åˆ°é‡Œé¢çš„å®ç°çœ‹çœ‹ï¼Œåšäº†äº›ä»€ä¹ˆï¼š</p>
<p><img loading="lazy" alt="image.png" src="/images/1682242484220-513127a8-23a4-4259-aedc-5f316be1d453.png"></p>
<p>è¿›å…¥å®ç°å±‚ï¼ŒAbstractProxyProtocol.java æ˜¯ä¸ªæŠ½è±¡ç±»ï¼š</p>
<pre><code class="java">public &lt;T&gt; Exporter&lt;T&gt; export(final Invoker&lt;T&gt; invoker) throws RpcException &#123;
    final String uri = serviceKey(invoker.getUrl());
    Exporter&lt;T&gt; exporter = (Exporter)this.exporterMap.get(uri);
    if (exporter != null &amp;&amp; Objects.equals(exporter.getInvoker().getUrl(), invoker.getUrl())) &#123;
        return exporter;
    &#125; else &#123;
        final Runnable runnable = this.doExport(this.proxyFactory.getProxy(new Invoker&lt;T&gt;() &#123;
            public Class&lt;T&gt; getInterface() &#123;
                return invoker.getInterface();
            &#125;

            public Result invoke(Invocation invocation) throws RpcException &#123;
                Map var10000 = RpcContext.getServiceContext().getObjectAttachments();
                Objects.requireNonNull(invocation);
                var10000.forEach(invocation::setObjectAttachment);
                return invoker.invoke(invocation);
            &#125;

            public URL getUrl() &#123;
                return invoker.getUrl();
            &#125;

            public boolean isAvailable() &#123;
                return invoker.isAvailable();
            &#125;

            public void destroy() &#123;
                invoker.destroy();
            &#125;
        &#125;, true), invoker.getInterface(), invoker.getUrl());
        Exporter&lt;T&gt; exporter = new AbstractExporter&lt;T&gt;(invoker) &#123;
            public void afterUnExport() &#123;
                AbstractProxyProtocol.this.exporterMap.remove(uri);
                if (runnable != null) &#123;
                    try &#123;
                        runnable.run();
                    &#125; catch (Throwable var2) &#123;
                        this.logger.warn("4-1", "", "", var2.getMessage(), var2);
                    &#125;
                &#125;

            &#125;
        &#125;;
        this.exporterMap.put(uri, exporter);
        return exporter;
    &#125;
&#125;
</code></pre>
<blockquote>
<p>ä»£ç åˆ†æ</p>
</blockquote>
<ol>
<li>final String uri = serviceKey(invoker.getUrl()); //ä»Mapä¸­å–URLä¿¡æ¯ï¼Œç”¨äºé…ç½®å®¢æˆ·ç«¯è¯·æ±‚çš„åè®®ä¿¡æ¯(è°ƒç”¨çš„ç±»ï¼Œæ–¹æ³•ï¼Œå‚æ•°ã€åè®®ç­‰)</li>
<li>final Runnable runnable = this.doExport(this.proxyFactory.getProxy(â€¦)</li>
</ol>
<p>è¿™ä¸ªæ–¹æ³•æ˜¯æ„å»ºä¸€ä¸ªçº¿ç¨‹ä»»åŠ¡ï¼Œé€šè¿‡è°ƒç”¨AbstractProxyProtocolç±»çš„å®ä¾‹æ–¹æ³•<code>doExport(...)</code>å¾—åˆ°ï¼Œå®ƒçš„å®ç°ç±»é»˜è®¤æ˜¯ï¼šGrpcProtocol.java<br><br><img loading="lazy" alt="image.png" src="/images/1682244844479-e97e81c9-1118-4bae-8a32-de9c93270006.png"></p>
<p>è¿›å…¥GrpcProtocol.javaå®ç°ç±»ï¼š</p>
<pre><code>protected &lt;T&gt; Runnable doExport(T proxiedImpl, Class&lt;T&gt; type, URL url) throws RpcException &#123;
    String key = url.getAddress();
    ProtocolServer protocolServer = (ProtocolServer)this.serverMap.computeIfAbsent(key, (k) -&gt; &#123;
        DubboHandlerRegistry registry = new DubboHandlerRegistry();
        NettyServerBuilder builder = (NettyServerBuilder)NettyServerBuilder.forPort(url.getPort()).fallbackHandlerRegistry(registry);
        Server originalServer = GrpcOptionsUtils.buildServerBuilder(url, builder).build();
        GrpcRemotingServer remotingServer = new GrpcRemotingServer(originalServer, registry);
        return new AbstractProxyProtocol.ProxyProtocolServer(this, remotingServer);
    &#125;);
    GrpcRemotingServer grpcServer = (GrpcRemotingServer)protocolServer.getRemotingServer();
    FrameworkServiceRepository serviceRepository = this.frameworkModel.getServiceRepository();
    ProviderModel providerModel = serviceRepository.lookupExportedService(url.getServiceKey());
    if (providerModel == null) &#123;
        throw new IllegalStateException("Service " + url.getServiceKey() + "should have already been stored in service repository, but failed to find it.");
    &#125; else &#123;
        Object originalImpl = providerModel.getServiceInstance();
        Class&lt;?&gt; implClass = originalImpl.getClass();

        try &#123;
            Method method = implClass.getMethod("setProxiedImpl", type);
            method.invoke(originalImpl, proxiedImpl);
        &#125; catch (Exception var12) &#123;
            throw new IllegalStateException("Failed to set dubbo proxied service impl to stub, please make sure your stub was generated by the dubbo-protoc-compiler.", var12);
        &#125;

        grpcServer.getRegistry().addService((BindableService)originalImpl, url.getServiceKey());
        if (!grpcServer.isStarted()) &#123;
            grpcServer.start();
        &#125;

        return () -&gt; &#123;
            grpcServer.getRegistry().removeService(url.getServiceKey());
        &#125;;
    &#125;
&#125;
</code></pre>
<p>å¯ä»¥çœ‹åˆ°ï¼Œæš´éœ²æœåŠ¡çš„æœ€åº•å±‚å®ç°æ˜¯é€šè¿‡Nettyå®ç°çš„ï¼Œè¿™é‡Œå…ˆä¸è®¨è®ºNettyæœåŠ¡çš„åŸç†ã€‚<br><br>å›æ¥åˆ°æŠ½è±¡ç±»çš„exportæ–¹æ³•ï¼Œçœ‹è¿™è¡Œä»£ç ï¼š</p>
<p>ç”Ÿæˆä»£ç†ï¼Œå¹¶å®ç°ä¸€ä¸ªInvokerå®ç°ï¼Œå®šä¹‰äº†invokeæ–¹æ³•çš„è°ƒç”¨ï¼ˆåå°„ï¼‰ï¼š</p>
<pre><code>this.proxyFactory.getProxy(new Invoker&lt;T&gt;() &#123;
            public Class&lt;T&gt; getInterface() &#123;
                return invoker.getInterface();
            &#125;

            public Result invoke(Invocation invocation) throws RpcException &#123;
                Map var10000 = RpcContext.getServiceContext().getObjectAttachments();
                Objects.requireNonNull(invocation);
                var10000.forEach(invocation::setObjectAttachment);
                return invoker.invoke(invocation);
            &#125;

            public URL getUrl() &#123;
                return invoker.getUrl();
            &#125;

            public boolean isAvailable() &#123;
                return invoker.isAvailable();
            &#125;

            public void destroy() &#123;
                invoker.destroy();
            &#125;
        &#125;, true)
</code></pre>
<p><strong>é‚£åŸºæœ¬ä¸Šå°±äº†ç„¶äº†ï¼Œå°±æ˜¯è¯´ï¼Œdubboé€šè¿‡nettyä½œä¸ºåº•å±‚æœåŠ¡é€šä¿¡ï¼Œç„¶åä»nettyæœåŠ¡ä¸­å–å¾—clientç«¯å‘èµ·çš„è¯·æ±‚ä¿¡æ¯åï¼Œå†é€šè¿‡proxyè¿›è¡Œåå°„è°ƒç”¨Provideç«¯çš„å®ç°ç±»ã€‚(export-&gt;proxy-&gt;proxyFactory-&gt;Invokerï¼‰</strong></p>
<p>ä»¥ä¸Šå®ç°ç±»åœ¨providerç«¯ä¼šå°†å®ç°åœ°å€å’Œã€å‚æ•°å’ŒæœåŠ¡ååˆ†åˆ«æ³¨å†Œæœ¬åœ°ä¼šä¿å­˜åœ¨exporterMapå’ŒserverMapä¸­ï¼Œè€Œåœ¨ğŸ•Šï¸ä¸­ï¼Œæˆ‘ä»¬è®¾ç½®äº†ç”¨äºæ³¨å†Œä¸­å¿ƒçš„Kafkaåœ°å€ï¼Œæ‰€ä»¥ï¼Œè¿™äº›æœåŠ¡ã€å‚æ•°å’Œç”¨äºåå°„çš„ç±»ã€æ–¹æ³•ç­‰ä¿¡æ¯éƒ½å­˜å‚¨åœ¨Kafkaä¸­ã€‚åªæœ‰åœ¨clientç«¯å‘èµ·rpcè°ƒç”¨æ—¶ï¼Œé€šè¿‡nettyä¼ é€ç»™clientç«¯ï¼Œæ‹¿åˆ°åæ‰ä¼šè§¦å‘Invokeråå°„è°ƒç”¨ï¼ˆå»¶è¿Ÿè°ƒç”¨çš„callbackè¯­æ³•ï¼‰ã€‚</p>
<blockquote>
<p>javassistæ¥è¯´æ‰§è¡ŒåŠ¨æ€ç”Ÿæˆçš„Wrapper#invokeMethod</p>
</blockquote>
<h3 id="ä½¿ç”¨clientç«¯è°ƒç”¨Provideræ¥å£"><a title="ä½¿ç”¨clientç«¯è°ƒç”¨Provideræ¥å£" class="headerlink" href="#ä½¿ç”¨clientç«¯è°ƒç”¨Provideræ¥å£"></a>ä½¿ç”¨clientç«¯è°ƒç”¨Provideræ¥å£</h3><pre><code class="java">@Test
    public void test() &#123;
        ReferenceConfig&lt;GreetingsService&gt; reference = new ReferenceConfig&lt;&gt;();
        reference.setApplication(new ApplicationConfig("first-dubbo-consumer"));
        reference.setRegistry(new RegistryConfig("zookeeper://127.0.0.1:2181"));
        reference.setInterface(GreetingsService.class);
        GreetingsService service = reference.get();
        String message = service.sayHi("dubbo");
        Assertions.assertEquals(message, "hi, dubbo");
    &#125;
</code></pre>
<p><strong>ä»£ç åˆ†æï¼š</strong></p>
<p>1ï¼‰å£°æ˜å®¢æˆ·ç«¯æœåŠ¡åç§°ï¼šfirst-dubbo-consumer</p>
<p>\2) è®¾ç½®æ³¨å†Œä¸­å¿ƒåœ°å€</p>
<p>3ï¼‰è·å–GreetingsServiceçš„å®ç°ç±»ï¼ˆé€šè¿‡åå°„ï¼‰</p>
<p>ç¬¬ä¸‰æ­¥ä¸­è°ƒç”¨å¦‚ä¸‹ä»£ç ç”Ÿæˆåå°„ä»£ç†ç±»ï¼š</p>
<pre><code class="java">private T createProxy(Map&lt;String, String&gt; referenceParameters) &#123;
    if (this.shouldJvmRefer(referenceParameters)) &#123;
        this.createInvokerForLocal(referenceParameters);
    &#125; else &#123;
        this.urls.clear();
        this.meshModeHandleUrl(referenceParameters);
        if (StringUtils.isNotEmpty(this.url)) &#123;
            this.parseUrl(referenceParameters);
        &#125; else if (!"injvm".equalsIgnoreCase(this.getProtocol())) &#123;
            this.aggregateUrlFromRegistry(referenceParameters);
        &#125;

        this.createInvokerForRemote();
    &#125;

    if (logger.isInfoEnabled()) &#123;
        logger.info("Referred dubbo service: [" + (String)referenceParameters.get("interface") + "]." + (Boolean.parseBoolean((String)referenceParameters.get("generic")) ? " it's GenericService reference" : " it's not GenericService reference"));
    &#125;

    URL consumerUrl = new ServiceConfigURL("consumer", (String)referenceParameters.get("register.ip"), 0, (String)referenceParameters.get("interface"), referenceParameters);
    URL consumerUrl = consumerUrl.setScopeModel(this.getScopeModel());
    consumerUrl = consumerUrl.setServiceModel(this.consumerModel);
    MetadataUtils.publishServiceDefinition(consumerUrl, this.consumerModel.getServiceModel(), this.getApplicationModel());
    return this.proxyFactory.getProxy(this.invoker, ProtocolUtils.isGeneric(this.generic));
&#125;
</code></pre>
<p><strong>ä»£ç åˆ†æï¼š</strong></p>
<p>è¿™é‡Œé¢ç›®æµ‹æœ€é‡è¦çš„å°±ä¸¤ä¸ªæ–¹æ³•ï¼Œ<code>this.createInvokerForLocal(referenceParameters);</code>å’Œ <code>this.createInvokerForRemote();</code></p>
<ul>
<li>this.createInvokerForLocal(referenceParameters):</li>
</ul>
<pre><code class="java">private void createInvokerForLocal(Map&lt;String, String&gt; referenceParameters) &#123;
    URL url = new ServiceConfigURL("injvm", "127.0.0.1", 0, this.interfaceClass.getName(), referenceParameters);
    URL url = url.setScopeModel(this.getScopeModel());
    url = url.setServiceModel(this.consumerModel);
    Invoker&lt;?&gt; withFilter = this.protocolSPI.refer(this.interfaceClass, url);
    List&lt;Invoker&lt;?&gt;&gt; invokers = new ArrayList();
    invokers.add(withFilter);
    this.invoker = Cluster.getCluster(url.getScopeModel(), "failover").join(new StaticDirectory(url, invokers), true);
    if (logger.isInfoEnabled()) &#123;
        logger.info("Using in jvm service " + this.interfaceClass.getName());
    &#125;

&#125;
</code></pre>
<p>ç›®æµ‹<code>Invoker&lt;?&gt; withFilter = this.protocolSPI.refer(this.interfaceClass, url);</code>è¿™æ®µä»£ç æ˜¯ä»SPIåè®®ç±»è·å–Invokerå¯¹è±¡ï¼Œè¿›è¡Œåå°„ï¼Œé‚£ä¹ˆï¼Œä¸æ³¨å†Œä¸­å¿ƒé€šä¿¡å¹¶è·å–åå°„éœ€è¦çš„å¿…è¦ä¿¡æ¯ä¸€å®šåœ¨è¿™é‡Œé¢ã€‚</p>
<pre><code class="java">public &lt;T&gt; Invoker&lt;T&gt; refer(Class&lt;T&gt; type, URL url) throws RpcException &#123;
    return this.protocolBindingRefer(type, url);
&#125;
</code></pre>
<p>å†å¾€ä¸‹çœ‹ï¼š</p>
<pre><code class="java">public &lt;T&gt; Invoker&lt;T&gt; protocolBindingRefer(Class&lt;T&gt; serviceType, URL url) throws RpcException &#123;
    this.checkDestroyed();
this.optimizeSerialization(url);
DubboInvoker&lt;T&gt; invoker = new DubboInvoker(serviceType, url, this.getClients(url), this.invokers);
this.invokers.add(invoker);
return invoker;
&#125;
</code></pre>
<p>åœ¨è¿™ä¸ªæ–¹æ³•é‡Œï¼Œå°±å·²ç»è·å–åˆ°äº†DubboInvokerå¯¹è±¡ï¼Œé‚£è¿™ä¸ªæ˜¯å…³é”®ä»£ç ï¼š</p>
<pre><code>DubboInvoker&lt;T&gt; invoker = new DubboInvoker(serviceType, url, this.getClients(url), this.invokers);
</code></pre>
<p>è¿™æ®µä»£ç ç›®æµ‹åªæœ‰<code>this.getClients(url)</code>è·Ÿé€šä¿¡æœ‰å…³ï¼Œæ•…å†æ¢ï¼š</p>
<pre><code class="java">private ExchangeClient[] getClients(URL url) &#123;
    int connections = url.getParameter("connections", 0);
if (connections == 0) &#123;
    String shareConnectionsStr = StringUtils.isBlank(url.getParameter("shareconnections", (String)null)) ? ConfigurationUtils.getProperty(url.getOrDefaultApplicationModel(), "shareconnections", "1") : url.getParameter("shareconnections", (String)null);
    connections = Integer.parseInt(shareConnectionsStr);
    List&lt;ReferenceCountExchangeClient&gt; shareClients = this.getSharedClient(url, connections);
    ExchangeClient[] clients = new ExchangeClient[connections];
    Objects.requireNonNull(shareClients);
    Arrays.setAll(clients, shareClients::get);
    return clients;
&#125; else &#123;
    ExchangeClient[] clients = new ExchangeClient[connections];

    for(int i = 0; i &lt; clients.length; ++i) &#123;
        clients[i] = this.initClient(url);
    &#125;

    return clients;
&#125;
&#125;
</code></pre>
<p>å—¯ï¼Œå†ç›®æµ‹çœ‹çœ‹<code>getsharedClient</code>æ–¹æ³•:</p>
<pre><code class="java">private List&lt;ReferenceCountExchangeClient&gt; getSharedClient(URL url, int connectNum) &#123;
    String key = url.getAddress();
    Object clients = this.referenceClientMap.get(key);
    List typedClients;
    if (clients instanceof List) &#123;
        typedClients = (List)clients;
        if (this.checkClientCanUse(typedClients)) &#123;
            this.batchClientRefIncr(typedClients);
            return typedClients;
        &#125;
    &#125;

    typedClients = null;
    synchronized(this.referenceClientMap) &#123;
        while(true) &#123;
            clients = this.referenceClientMap.get(key);
            if (clients instanceof List) &#123;
                typedClients = (List)clients;
                if (this.checkClientCanUse(typedClients)) &#123;
                    this.batchClientRefIncr(typedClients);
                    return typedClients;
                &#125;

                this.referenceClientMap.put(key, PENDING_OBJECT);
                break;
            &#125;

            if (clients != PENDING_OBJECT) &#123;
                this.referenceClientMap.put(key, PENDING_OBJECT);
                break;
            &#125;

            try &#123;
                this.referenceClientMap.wait();
            &#125; catch (InterruptedException var21) &#123;
            &#125;
        &#125;
    &#125;

    boolean var18 = false;

    try &#123;
        var18 = true;
        connectNum = Math.max(connectNum, 1);
        if (CollectionUtils.isEmpty(typedClients)) &#123;
            typedClients = this.buildReferenceCountExchangeClientList(url, connectNum);
            var18 = false;
        &#125; else &#123;
            for(int i = 0; i &lt; typedClients.size(); ++i) &#123;
                ReferenceCountExchangeClient referenceCountExchangeClient = (ReferenceCountExchangeClient)typedClients.get(i);
                if (referenceCountExchangeClient != null &amp;&amp; !referenceCountExchangeClient.isClosed()) &#123;
                    referenceCountExchangeClient.incrementAndGetCount();
                &#125; else &#123;
                    typedClients.set(i, this.buildReferenceCountExchangeClient(url));
                &#125;
            &#125;

            var18 = false;
        &#125;
    &#125; finally &#123;
        if (var18) &#123;
            synchronized(this.referenceClientMap) &#123;
                if (typedClients == null) &#123;
                    this.referenceClientMap.remove(key);
                &#125; else &#123;
                    this.referenceClientMap.put(key, typedClients);
                &#125;

                this.referenceClientMap.notifyAll();
            &#125;
        &#125;
    &#125;

    synchronized(this.referenceClientMap) &#123;
        if (typedClients == null) &#123;
            this.referenceClientMap.remove(key);
        &#125; else &#123;
            this.referenceClientMap.put(key, typedClients);
        &#125;

        this.referenceClientMap.notifyAll();
        return typedClients;
    &#125;
&#125;
</code></pre>
<p>ä»¥ä¸Šä»£ç å¤§æ„æ˜¯ï¼Œå…ˆä»æœ¬åœ°cacheä¸­æ‹¿ï¼Œæ‹¿ä¸åˆ°å°±ä»æ³¨å†Œä¸­å¿ƒå–ï¼Œé‚£åªè¦çœ‹è¿™æ®µä»£ç å°±è¡Œï¼š</p>
<p>typedClients = this.buildReferenceCountExchangeClientList(url, connectNum);</p>
<p>å‡†ç¡®çš„è¯´ï¼Œçœ‹è¿™ä¸ªæ–¹æ³•å°±è¡Œ,<code>buildReferenceCountExchangeClient</code>:</p>
<pre><code class="java">private ReferenceCountExchangeClient buildReferenceCountExchangeClient(URL url) &#123;
    ExchangeClient exchangeClient = this.initClient(url);
ReferenceCountExchangeClient client = new ReferenceCountExchangeClient(exchangeClient, "dubbo");
int shutdownTimeout = ConfigurationUtils.getServerShutdownTimeout(url.getScopeModel());
client.setShutdownWaitTime(shutdownTimeout);
return client;
&#125;
</code></pre>
<p>é©¬ä¸Šå°±è¦çœ‹åˆ°çœŸç›¸äº†ï¼Œå†çœ‹çœ‹<code>initClient</code>æ–¹æ³•:</p>
<pre><code class="java">private ExchangeClient initClient(URL url) &#123;
    String str = url.getParameter("client", url.getParameter("server", "netty"));
if (StringUtils.isNotEmpty(str) &amp;&amp; !url.getOrDefaultFrameworkModel().getExtensionLoader(Transporter.class).hasExtension(str)) &#123;
    throw new RpcException("Unsupported client type: " + str + ", supported client type is " + StringUtils.join(url.getOrDefaultFrameworkModel().getExtensionLoader(Transporter.class).getSupportedExtensions(), " "));
&#125; else &#123;
    try &#123;
        URL url = new ServiceConfigURL("dubbo", url.getUsername(), url.getPassword(), url.getHost(), url.getPort(), url.getPath(), url.getAllParameters());
        url = url.addParameter("codec", "dubbo");
        url = url.addParameterIfAbsent("heartbeat", String.valueOf(60000));
        return (ExchangeClient)(url.getParameter("lazy", false) ? new LazyConnectExchangeClient(url, this.requestHandler) : Exchangers.connect(url, this.requestHandler));
    &#125; catch (RemotingException var4) &#123;
        throw new RpcException("Fail to create remoting client for service(" + url + "): " + var4.getMessage(), var4);
    &#125;
&#125;
&#125;
</code></pre>
<p>è¿™æ®µä»£ç è¯´è¦æ‹¿nettyæœåŠ¡å™¨è¿™äº›å‚æ•°å­—æ®µï¼š<code>String str = url.getParameter("client", url.getParameter("server", "netty"))</code></p>
<p>è¯´æ˜provideré»˜è®¤æ˜¯nettyæœåŠ¡ã€‚</p>
<p>å†çœ‹è¿™æ®µä»£ç ï¼š</p>
<pre><code class="java">return (ExchangeClient)(url.getParameter("lazy", false) ? new LazyConnectExchangeClient(url, this.requestHandler) : Exchangers.connect(url, this.requestHandler));
</code></pre>
<p>çœŸç›¸å‡ºæ¥äº†ã€‚ã€‚ã€‚ã€‚ã€‚</p>
<p><code>Exchangers.connect(url, this.requestHandler)</code>:</p>
<pre><code class="java">public static ExchangeClient connect(URL url, ExchangeHandler handler) throws RemotingException &#123;
    if (url == null) &#123;
        throw new IllegalArgumentException("url == null");
    &#125; else if (handler == null) &#123;
        throw new IllegalArgumentException("handler == null");
    &#125; else &#123;
        return getExchanger(url).connect(url, handler);
    &#125;
&#125;
</code></pre>
<p>å†è¿›å…¥HeaderExchangerç±»çš„connectæ–¹æ³•ï¼š</p>
<pre><code class="plain">public ExchangeClient connect(URL url, ExchangeHandler handler) throws RemotingException &#123;
    return new HeaderExchangeClient(Transporters.connect(url, new ChannelHandler[]&#123;new DecodeHandler(new HeaderExchangeHandler(handler))&#125;), true);
&#125;
</code></pre>
<p>å†çœ‹<code>Transporters.connect()</code>æ–¹æ³•:</p>
<pre><code class="java">public static Client connect(URL url, ChannelHandler... handlers) throws RemotingException &#123;
    if (url == null) &#123;
        throw new IllegalArgumentException("url == null");
    &#125; else &#123;
        Object handler;
        if (handlers != null &amp;&amp; handlers.length != 0) &#123;
            if (handlers.length == 1) &#123;
                handler = handlers[0];
            &#125; else &#123;
                handler = new ChannelHandlerDispatcher(handlers);
            &#125;
        &#125; else &#123;
            handler = new ChannelHandlerAdapter();
        &#125;

        return getTransporter(url).connect(url, (ChannelHandler)handler);
    &#125;
&#125;
</code></pre>
<p>æœ€åå†è¿›å»<code>getTransporter(url).connect(url, (ChannelHandler)handler)</code>è¿™ä¸ªå®ç°ï¼Œå‘ç°å¤§éƒ¨åˆ†éƒ½æ˜¯Nettyçš„å®ç°ï¼š</p>
<p><img loading="lazy" alt="img" src="/images/1683352201307-493127a0-4a91-455e-90ed-d4d79c564820.png"></p>
<p>é€šè¿‡è°ƒè¯•ï¼Œå‘ç°å®ƒçš„å®ç°æ˜¯ï¼š<code>org.apache.dubbo.remoting.transport.netty4.NettyClient.java</code></p>
<p><img loading="lazy" alt="img" src="/images/1683357207728-c49aceb1-0891-4147-91b1-c0e81328605e.png"></p>
<ul>
<li>this.createInvokerForRemote():</li>
</ul>
<pre><code class="java">private void createInvokerForRemote() &#123;
    if (this.urls.size() == 1) &#123;
        URL curUrl = (URL)this.urls.get(0);
        this.invoker = this.protocolSPI.refer(this.interfaceClass, curUrl);
        if (!UrlUtils.isRegistry(curUrl) &amp;&amp; !curUrl.getParameter("unloadClusterRelated", false)) &#123;
            List&lt;Invoker&lt;?&gt;&gt; invokers = new ArrayList();
            invokers.add(this.invoker);
            this.invoker = Cluster.getCluster(this.getScopeModel(), "failover").join(new StaticDirectory(curUrl, invokers), true);
        &#125;
    &#125; else &#123;
        List&lt;Invoker&lt;?&gt;&gt; invokers = new ArrayList();
        URL registryUrl = null;
        Iterator var3 = this.urls.iterator();

        while(var3.hasNext()) &#123;
            URL url = (URL)var3.next();
            invokers.add(this.protocolSPI.refer(this.interfaceClass, url));
            if (UrlUtils.isRegistry(url)) &#123;
                registryUrl = url;
            &#125;
        &#125;

        if (registryUrl != null) &#123;
            String cluster = registryUrl.getParameter("cluster", "zone-aware");
            this.invoker = Cluster.getCluster(registryUrl.getScopeModel(), cluster, false).join(new StaticDirectory(registryUrl, invokers), false);
        &#125; else &#123;
            if (CollectionUtils.isEmpty(invokers)) &#123;
                throw new IllegalArgumentException("invokers == null");
            &#125;

            URL curUrl = ((Invoker)invokers.get(0)).getUrl();
            String cluster = curUrl.getParameter("cluster", "failover");
            this.invoker = Cluster.getCluster(this.getScopeModel(), cluster).join(new StaticDirectory(curUrl, invokers), true);
        &#125;
    &#125;

&#125;
</code></pre>
<p>localå’Œremoteæ–¹æ³•å¤§åŒå°å¼‚ï¼ŒcreateInvoderForLocal()æ˜¯åˆ›å»ºæœ¬åœ°è°ƒç”¨çš„åå°„Invokerï¼Œè€ŒcreateInvokerForRemote()å°±æ˜¯åˆ›å»ºè¿œç¨‹è°ƒç”¨çš„åå°„Invokerã€‚</p>
<p><a target="_blank" rel="noopener" href="https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/concepts-and-architecture/code-architecture/#%E8%B0%83%E7%94%A8%E9%93%BE">å®˜æ–¹æ–‡æ¡£</a></p>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/7213211041764425788">å‚è€ƒæ–‡ç« </a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/382200101">å‚è€ƒæ–‡ç« 2</a></p>
<p><a target="_blank" rel="noopener" href="https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/quick-start/brief/">å¿«é€Ÿå­¦ä¹ æ–‡æ¡£</a></p>
<p>é‚£ä¹ˆï¼ŒçŸ¥é“äº†é€šè®¯å±‚æ˜¯nettyï¼Œé‚£æˆ‘å†å­¦ä¹ ä¸€ä¸‹nettyçš„é€šè®¯åŸç†å°±è¡Œäº†ã€‚</p>
<h2 id="nettyé€šä¿¡åŸç†"><a title="nettyé€šä¿¡åŸç†" class="headerlink" href="#nettyé€šä¿¡åŸç†"></a>nettyé€šä¿¡åŸç†</h2><p>å¾…æ›´ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">

<div class="article-categories">
  <span></span>
  <a class="article-category-link" href="/categories/rpc/">rpc</a>â–º<a class="article-category-link" href="/categories/rpc/dubbo/">dubbo</a>
</div>


  <div class="article-tags">
  
  <span></span> <a href="/tags/rpc/">rpc</a><a href="/tags/dubbo/">dubbo</a><a href="/tags/netty/">netty</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://clockcoder.com/2023/04/23/rpc%E6%A1%86%E6%9E%B6%E4%B9%8Bdubbo%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E4%BD%BF%E7%94%A8-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/" data-title="rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ | å°é»‘çš„æŠ€æœ¯åšå®¢" data-tsina="1601653200" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 

<div class="next">
<a href="/2023/04/10/åŒºå—é“¾æŠ€æœ¯å­¦ä¹ ä¸åˆ†äº«/"  title="åŒºå—é“¾æŠ€æœ¯å­¦ä¹ ä¸åˆ†äº«">
 <strong>ä¸‹ä¸€ç¯‡ï¼š</strong><br/> 
 <span>åŒºå—é“¾æŠ€æœ¯å­¦ä¹ ä¸åˆ†äº«
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2023/04/23/rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ/" data-title="rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ" data-url="http://clockcoder.com/2023/04/23/rpc%E6%A1%86%E6%9E%B6%E4%B9%8Bdubbo%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E4%BD%BF%E7%94%A8-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90/"></div>
</section>


<section id="comments" class="comment">
  <div id="disqus_thread">
    <noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</section>

</div>  
      <div class="openaside"><a class="navbutton" href="#" title="æ˜¾ç¤ºä¾§è¾¹æ "></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">æ–‡ç« ç›®å½•</strong>
 
 <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#rpc%E6%A1%86%E6%9E%B6%E4%B9%8Bdubbo%E4%BB%8E%E5%85%A5%E9%97%A8%E5%88%B0%E4%BD%BF%E7%94%A8-%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"><span class="toc-number">1.</span> <span class="toc-text">rpcæ¡†æ¶ä¹‹dubboä»å…¥é—¨åˆ°ä½¿ç”¨-æºç åˆ†æ</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%86%E8%A7%A3-Dubbo-%E6%A0%B8%E5%BF%83%E6%A6%82%E5%BF%B5%E5%92%8C%E6%9E%B6%E6%9E%84"><span class="toc-number">2.</span> <span class="toc-text">äº†è§£ Dubbo æ ¸å¿ƒæ¦‚å¿µå’Œæ¶æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Dubbo-%E6%95%B0%E6%8D%AE%E9%9D%A2"><span class="toc-number">2.1.</span> <span class="toc-text">Dubbo æ•°æ®é¢</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#dubbo%E6%A1%86%E6%9E%B6%E6%80%BB%E4%BD%93%E6%9E%B6%E6%9E%84"><span class="toc-number">2.2.</span> <span class="toc-text">dubboæ¡†æ¶æ€»ä½“æ¶æ„</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%8A%82%E7%82%B9%E8%A7%92%E8%89%B2%E8%AF%B4%E6%98%8E"><span class="toc-number">2.2.0.0.1.</span> <span class="toc-text">èŠ‚ç‚¹è§’è‰²è¯´æ˜</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E6%9E%B6%E6%9E%84"><span class="toc-number">2.3.</span> <span class="toc-text">ä»£ç æ¶æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%84%E5%B1%82%E8%AF%B4%E6%98%8E"><span class="toc-number">2.4.</span> <span class="toc-text">å„å±‚è¯´æ˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E7%B3%BB%E8%AF%B4%E6%98%8E"><span class="toc-number">2.5.</span> <span class="toc-text">å…³ç³»è¯´æ˜</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E5%9D%97%E5%88%86%E5%8C%85"><span class="toc-number">2.6.</span> <span class="toc-text">æ¨¡å—åˆ†åŒ…</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BE%9D%E8%B5%96%E5%85%B3%E7%B3%BB"><span class="toc-number">2.7.</span> <span class="toc-text">ä¾èµ–å…³ç³»</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%B0%83%E7%94%A8%E9%93%BE"><span class="toc-number">2.8.</span> <span class="toc-text">è°ƒç”¨é“¾</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%86%E5%9F%9F%E6%A8%A1%E5%9E%8B"><span class="toc-number">2.9.</span> <span class="toc-text">é¢†åŸŸæ¨¡å‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RPC%E4%BC%A0%E8%BE%93%E5%B1%82%E5%AE%9E%E7%8E%B0%E5%8E%9F%E7%90%86"><span class="toc-number">2.10.</span> <span class="toc-text">RPCä¼ è¾“å±‚å®ç°åŸç†</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AA%E6%9C%8D%E5%8A%A1%E7%AB%AF-provide"><span class="toc-number">2.10.1.</span> <span class="toc-text">å¯åŠ¨ä¸€ä¸ªæœåŠ¡ç«¯(provide)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8client%E7%AB%AF%E8%B0%83%E7%94%A8Provider%E6%8E%A5%E5%8F%A3"><span class="toc-number">2.10.2.</span> <span class="toc-text">ä½¿ç”¨clientç«¯è°ƒç”¨Provideræ¥å£</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#netty%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86"><span class="toc-number">2.11.</span> <span class="toc-text">nettyé€šä¿¡åŸç†</span></a></li></ol></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="éšè—ä¾§è¾¹æ "></a></div>
<aside class="clearfix">

  
<div class="github-card">
<p class="asidetitle">Github åç‰‡</p>
<div class="github-card" data-github="huguiqi" data-width="220" data-height="119" data-theme="medium">
<script type="text/javascript" src="//cdn.jsdelivr.net/github-cards/latest/widget.js" ></script>
</div>
  </div>



  
<div class="categorieslist">
	<p class="asidetitle">åˆ†ç±»</p>
		<ul>
		
		  
			<li><a href="/categories/AFNetWork3-1/" title="AFNetWork3.1">AFNetWork3.1<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/Alcatraz/" title="Alcatraz">Alcatraz<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/IT-è¿ç»´/" title="IT&amp;è¿ç»´">IT&amp;è¿ç»´<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/activiti/" title="activiti">activiti<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/devops/" title="devops">devops<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/docker/" title="docker">docker<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/rpc/dubbo/" title="dubbo">dubbo<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/git/" title="git">git<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/github-åšå®¢/" title="github åšå®¢">github åšå®¢<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/hexo/" title="hexo">hexo<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/hexoæ’ä»¶/" title="hexoæ’ä»¶">hexoæ’ä»¶<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/iOS/" title="iOS">iOS<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/ios-Developer/" title="ios Developer">ios Developer<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/java/" title="java">java<sup>11</sup></a></li>
		  
		
		  
			<li><a href="/categories/javascript/" title="javascript">javascript<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/k8s/" title="k8s">k8s<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/kafka/" title="kafka">kafka<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/maven/" title="maven">maven<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/k8s/minikube/" title="minikube">minikube<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/mysql/" title="mysql">mysql<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/node/" title="node">node<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/nodejs/" title="nodejs">nodejs<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/kafka/nodejs/" title="nodejs">nodejs<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/postgresql/" title="postgresql">postgresql<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/python/" title="python">python<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/rabbitMQ/" title="rabbitMQ">rabbitMQ<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/rabbitmq/" title="rabbitmq">rabbitmq<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/redis/" title="redis">redis<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/review/" title="review">review<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/rpc/" title="rpc">rpc<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/springboot/skywalking/" title="skywalking">skywalking<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/sonarqube/" title="sonarqube">sonarqube<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/springCloud/" title="springCloud">springCloud<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/springboot/" title="springboot">springboot<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/activiti/springboot/" title="springboot">springboot<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/springcloud/" title="springcloud">springcloud<sup>4</sup></a></li>
		  
		
		  
			<li><a href="/categories/xcode/" title="xcode">xcode<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ä¸“ä¸šæŠ€æœ¯/" title="ä¸“ä¸šæŠ€æœ¯">ä¸“ä¸šæŠ€æœ¯<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ä¸“ä¸šæŠ€æœ¯-å°è±¡ç¬”è®°/" title="ä¸“ä¸šæŠ€æœ¯(å°è±¡ç¬”è®°)">ä¸“ä¸šæŠ€æœ¯(å°è±¡ç¬”è®°)<sup>222</sup></a></li>
		  
		
		  
			<li><a href="/categories/åˆ†å¸ƒå¼/" title="åˆ†å¸ƒå¼">åˆ†å¸ƒå¼<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/å‰ç«¯æŠ€æœ¯/" title="å‰ç«¯æŠ€æœ¯">å‰ç«¯æŠ€æœ¯<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/åŠ å¯†è§£å¯†/" title="åŠ å¯†è§£å¯†">åŠ å¯†è§£å¯†<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/åŒºå—é“¾/åŠ å¯†è´§å¸/" title="åŠ å¯†è´§å¸">åŠ å¯†è´§å¸<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/åŒºå—é“¾/" title="åŒºå—é“¾">åŒºå—é“¾<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/å¤§æ•°æ®/" title="å¤§æ•°æ®">å¤§æ•°æ®<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/å»¶è¿Ÿé˜Ÿåˆ—/" title="å»¶è¿Ÿé˜Ÿåˆ—">å»¶è¿Ÿé˜Ÿåˆ—<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/æ„Ÿæ‚Ÿ/" title="æ„Ÿæ‚Ÿ">æ„Ÿæ‚Ÿ<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/æ‚è°ˆ/" title="æ‚è°ˆ">æ‚è°ˆ<sup>8</sup></a></li>
		  
		
		  
			<li><a href="/categories/æ¶ˆæ¯ä¸­é—´ä»¶/" title="æ¶ˆæ¯ä¸­é—´ä»¶">æ¶ˆæ¯ä¸­é—´ä»¶<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ç½‘ç»œ/ç ´è§£/" title="ç ´è§£">ç ´è§£<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ç§‘å­¦ä¸Šç½‘/" title="ç§‘å­¦ä¸Šç½‘">ç§‘å­¦ä¸Šç½‘<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ç«™å†…æœç´¢-åšå®¢/" title="ç«™å†…æœç´¢ åšå®¢">ç«™å†…æœç´¢ åšå®¢<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ç®¡ç†/" title="ç®¡ç†">ç®¡ç†<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/ç³»ç»Ÿ/" title="ç³»ç»Ÿ">ç³»ç»Ÿ<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ç³»ç»Ÿ-å·¥å…·/" title="ç³»ç»Ÿ&amp;å·¥å…·">ç³»ç»Ÿ&amp;å·¥å…·<sup>6</sup></a></li>
		  
		
		  
			<li><a href="/categories/ç³»ç»Ÿ-è¿ç»´/" title="ç³»ç»Ÿ&amp;è¿ç»´">ç³»ç»Ÿ&amp;è¿ç»´<sup>33</sup></a></li>
		  
		
		  
			<li><a href="/categories/ç½‘ç»œ/" title="ç½‘ç»œ">ç½‘ç»œ<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/ç³»ç»Ÿ-è¿ç»´/ç½‘ç»œé…ç½®/" title="ç½‘ç»œé…ç½®">ç½‘ç»œé…ç½®<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/ç½‘ç»œé…ç½®/" title="ç½‘ç»œé…ç½®">ç½‘ç»œé…ç½®<sup>2</sup></a></li>
		  
		
		  
			<li><a href="/categories/è¯»ä¹¦ç¬”è®°/" title="è¯»ä¹¦ç¬”è®°">è¯»ä¹¦ç¬”è®°<sup>5</sup></a></li>
		  
		
		  
			<li><a href="/categories/è·¯ç”±å™¨/" title="è·¯ç”±å™¨">è·¯ç”±å™¨<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/è½¯ä»¶è§„åˆ’/" title="è½¯ä»¶è§„åˆ’">è½¯ä»¶è§„åˆ’<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/éšç¬”/" title="éšç¬”">éšç¬”<sup>3</sup></a></li>
		  
		
		  
			<li><a href="/categories/é¢è¯•/" title="é¢è¯•">é¢è¯•<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/é¢è¯•æ•´ç†/" title="é¢è¯•æ•´ç†">é¢è¯•æ•´ç†<sup>1</sup></a></li>
		  
		
		  
			<li><a href="/categories/é¢è¯•é¢˜/" title="é¢è¯•é¢˜">é¢è¯•é¢˜<sup>1</sup></a></li>
		  
		
		</ul>
</div>


  
<div class="tagslist">
	<p class="asidetitle">æ ‡ç­¾</p>
		<ul class="clearfix">
		
			
				<li><a href="/tags/ä»å°è±¡ç¬”è®°å¯¼å…¥/" title="ä»å°è±¡ç¬”è®°å¯¼å…¥">ä»å°è±¡ç¬”è®°å¯¼å…¥<sup>222</sup></a></li>
			
		
			
				<li><a href="/tags/k8s/" title="k8s">k8s<sup>11</sup></a></li>
			
		
			
				<li><a href="/tags/springboot/" title="springboot">springboot<sup>9</sup></a></li>
			
		
			
				<li><a href="/tags/éšç¬”/" title="éšç¬”">éšç¬”<sup>8</sup></a></li>
			
		
			
				<li><a href="/tags/docker/" title="docker">docker<sup>7</sup></a></li>
			
		
			
				<li><a href="/tags/redis/" title="redis">redis<sup>5</sup></a></li>
			
		
			
				<li><a href="/tags/nginx/" title="nginx">nginx<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/hexo/" title="hexo">hexo<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/nodejs/" title="nodejs">nodejs<sup>4</sup></a></li>
			
		
			
				<li><a href="/tags/spring-cloud/" title="spring cloud">spring cloud<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/é¢è¯•é¢˜/" title="é¢è¯•é¢˜">é¢è¯•é¢˜<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/Rejected/" title="Rejected">Rejected<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/rabbitMQ/" title="rabbitMQ">rabbitMQ<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/è·¯ç”±å™¨/" title="è·¯ç”±å™¨">è·¯ç”±å™¨<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/nexus/" title="nexus">nexus<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/ReactNative/" title="ReactNative">ReactNative<sup>3</sup></a></li>
			
		
			
				<li><a href="/tags/postgresql/" title="postgresql">postgresql<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/jdk/" title="jdk">jdk<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/åˆ†å¸ƒå¼é”/" title="åˆ†å¸ƒå¼é”">åˆ†å¸ƒå¼é”<sup>2</sup></a></li>
			
		
			
				<li><a href="/tags/ios-developer-upload/" title="ios developer upload">ios developer upload<sup>2</sup></a></li>
			
		
		</ul>
</div>


  <div class="linkslist">
  <p class="asidetitle">å‹æƒ…é“¾æ¥</p>
    <ul>
        
          <li>
            
            	<a href="http://clockcoder.com" target="_blank" title="æ‰¿æ¥æ‰‹æœºappã€å¾®ä¿¡ã€webå¼€å‘">æ‰¾äººåšè½¯ä»¶</a>
            
          </li>
        
    </ul>
</div>

  

<div class="doubanshow">
<p class="asidetitle">è±†ç“£ç§€</p>
<div>
<script type="text/javascript" src="http://www.douban.com/service/badge/64698454/?show=collection&amp;n=12&amp;columns=3&amp;hidelogo=yes&amp;hideself=yes&amp;cat=book|movie" ></script>
</div>
</div>


  <div class="rsspart">
	<a href="/atom.xml" target="_blank" title="rss">RSS è®¢é˜…</a>
</div>

  <div class="weiboshow">
  <p class="asidetitle">æ–°æµªå¾®åš</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=1601653200&verifier=bd864c6a&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello ,I&#39;m Sam.This is my Blog. <br/>
			Anything that can go wrong will go wrong</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/1601653200" target="_blank" class="icon-weibo" title="å¾®åš"></a>
		
		
		<a href="https://github.com/huguiqi" target="_blank" class="icon-github" title="github"></a>
		
		
		
		<a href="https://twitter.com/XiaoheiSpring" target="_blank" class="icon-twitter" title="twitter"></a>
		
		
		<a href="https://www.facebook.com/sam.hu.7334" target="_blank" class="icon-facebook" title="facebook"></a>
		
		
		<a href="https://www.linkedin.com/in/å°é»‘-èƒ¡-ab83b992" target="_blank" class="icon-linkedin" title="linkedin"></a>
		
		
		<a href="https://www.douban.com/people/64698454" target="_blank" class="icon-douban" title="è±†ç“£"></a>
		
		
		<a href="http://www.zhihu.com/people/hu-xiao-hei-53" target="_blank" class="icon-zhihu" title="çŸ¥ä¹"></a>
		
		
		<a href="https://plus.google.com/109318125124422212783?rel=author" target="_blank" class="icon-google_plus" title="Google+"></a>
		
		
		<a href="mailto:guiqi.hu@163.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		Powered by <a href="http://hexo.io" target="_blank" title="hexo">hexo</a> and Theme by <a href="http://blog.huguiqi.com." target="_blank" title="sam">sam</a> Â© 2023 
		
		<a href="/about" target="_blank" title="sam">sam</a>
		
		
		</p>
</div>

 <script type="text/javascript">
  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
  
  _st('install','qtnHgvQyg5N9h4en-9wA','2.0.0');
</script>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="å¾®ä¿¡"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="äººäºº"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="å¾®åš"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"å°é»‘_spring"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 


<script type="text/javascript">

var disqus_shortname = 'huguiqicom';

(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
(function(){
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
}());
</script>






<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?f5971877c7b77f98074be3ddabf34fbe";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="è¿”å›é¡¶éƒ¨"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
